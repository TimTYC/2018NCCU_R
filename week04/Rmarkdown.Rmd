---
title: "Rmarkdown"
author: "Chun-Yen Chen"
date: "2018/10/16"
output:
  ioslides_presentation:
    css: css/styles.css
    # logo: assets/img/Taiwan-R-logo.png
    widescreen: yes
    self_contained: false
---

```{r setup, include=FALSE, cache=FALSE}
suppressPackageStartupMessages({
  library(knitr) 
  library(magrittr)
  library(dplyr)
  library(ggplot2)
  library(xtable)
  library(data.table)
  library(DT)
})
opts_chunk$set(echo = TRUE, cache = FALSE, comment="")
fit100 <- function(fname) sprintf('<img src="img/%s" style="vertical-align : middle" />', fname)
fit50 <- function(fname) sprintf('<img src="img/%s" class="fit50" />', fname)
fig <- function(fname, size=100) 
  sprintf('<img src="img/%s" style="max-width:%d%%;max-height:%d%%;" />', fname, size, size)
fig2 <- function(path, size = 100) {
  sprintf("<img src='img/%s' style='width: %d%%'></img>", path, size)
}
sys_name <- Sys.info()["sysname"] %>% tolower
sys_encode <- c("utf8", "utf8", "big5")[pmatch(sys_name, c("linux", "darwin", "windows"))]
sessionInfo() %>% capture.output %>% cat(file = "sessionInfo.log", sep = "\n")
thm <- theme(text=element_text(size=18))
las2 <- theme(axis.text.x = element_text(angle = 90, hjust = 1))
```


##  複習第一週
* 建立 R 的使用環境
* 熟悉 R 語言基礎操作
    * 敘述句、數列
    * 查詢說明檔
* 了解 R 語言的物件的結構
    * 變數型態：logical、numeric、character、factor
    * 資料存放容器：list、data.frame

##  複習第二週
*  R 語言的流程控制
    * if、else
    * for loop
    * 自訂 function
*  R 語言的資料整理
    * 讀檔
    * dplyr
*  R 語言的資料爬析概念

##  複習第三週
* 資料視覺化（ggplot2）
    * 基本語法
    * 各式圖形畫法
    * 參數調整

##  資料分析流程
- 資料採集
- 資料清洗處理
- 統計及分析
- 視覺呈現

> - <p style="color:#750000;font-size:36px;">報告產出</p>

## 資料分析 in R 

<center>
`r fig("ResearchPipeline.png", 84)`   
<small>https://www.coursera.org/course/repdata</small>
</center>

## What is Markdown？
- 啟發自2004年純文字電子郵件
- 好寫、好讀
- 可以純文字發布
- [Markdown](http://daringfireball.net/projects/markdown/basics)
    - Light weight markup language
    - Remove HTML tag for higher readibility.
    - Inline HTML is avaliable.
    - HTML5 Introduction ([w3schools.com](https://www.w3schools.com/html/html5_intro.asp))

## What is RMarkdown？
- 可以在 Markdown 內嵌 R code
- 一次呈現執行程式碼後的結果及文字說明
- 不用再把圖、表複製到其他文件編輯器中
- Rmd -> md -> html (docx, pdf)

## Why we need R Markdown？

- 時間久了會忘記code的意思
- 要寫說明文件給同學、同事、教授、主管
- 教授很有想法，想嘗試新方法 <br> (~~FK！又要重跑一份~~)
- 老闆說要改流程 <br> (~~MD!之前貼到簡報上的圖又要重貼一份~~)

> - **專案報告要呈現，code改了，但是文件無法同時修改！** <br> 


## Why we need R Markdown？
- 製作reproducible的報告、投影片
- 想寫數學式子好展現自己的專業 $e=mc^2$
- 只有一份source code，不需要額外複製圖片到報告中
- 需求更改時，可以動態改變報告內容
- 增加資料分析演算法的可讀性
- IDE? RStudio提供支援

## 前置作業 - 安裝
- 最新版的RStudio已經包含R Markdown功能
- 你也可以透過以下指令安裝R Markdown套件：

```{r eval=FALSE, echo=TRUE}
install.packages("rmarkdown")
```

# R Markdown 快速導覽



## 打開你第一個RMarkdown

`Document`
<center>
<img src="img/openRMD.png" width="600px">
</center>

## Overview

<center>
`r fig("RmdOverview_1.png", 80)` 
</center>

## Markdown

<center>
`r fig("markdownOverview.png")`  
</center>

## R Code Chunks

<center>
<img src="img/markdownChunk_1.png" width="800px">
</center>


## Inline R Code and Equations

- 利用 \`r\` 在markdown中插入R程式
- 插入 LaTeX 公式的方法：   
    * 行內`$ equation $`   
    * 段落 `$$ equation $$`
- for example :
    - 這是DSP推出的第 `r  3+1` 門課程
    - 熵指標的公式為$-\sum{p_i \log{p_i}}$ ，表示系統的亂度
    - [markdown 公式輸入參考](http://oiltang.com/2014/05/04/markdown-and-mathjax/)
    
`r fig("InlineEx.png", 80)`  

## Rendering Output
- RStudio: "Knit" command (Ctrl+Shift+K)
- Command line: rmarkdown::render function

```{r eval=FALSE, echo=TRUE}
rmarkdown::render("input.Rmd")
```

# Markdown Basics

## Markdown Quick Reference

在RStudio中，也可以找到RMarkdown的作弊小文件！

<center>
<img src="img/MdRef_1.png" width="800px">
</center>

## 標題！

### Headers
- 字體大小：使用井字號
    - `# Header 1`
    - `## Header 2`
    - `### Header 3`
    - `#### Header 4`
    - `##### Header 5`
    - `###### Header 6`


## 字體！

- 我是正常文字
- 粗體：使用`**bold**` 或 `__bold__` 
- 斜體：使用 `*italics*` 或 `_italics_`
- 刪除線：使用`~~我是豬~~`

<p style="color:#0000C6;">結果：</p>
- 我是正常文字\
- **粗體：bold** \
- *斜體：italics* \
- 刪除線：~~我是豬~~
















































